<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Bulk SMS Broadcasting</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modern.css') }}">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark glass-nav fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold d-flex align-items-center" href="{{ url_for('index') }}">
                <div class="brand-icon">
                    <i class="fas fa-paper-plane"></i>
                </div>
                <span class="ms-2">SMS Broadcaster</span>
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link active" href="{{ url_for('index') }}">
                    <i class="fas fa-home me-1"></i>Home
                </a>
                <a class="nav-link" href="{{ url_for('campaigns') }}">
                    <i class="fas fa-list me-1"></i>Campaigns
                </a>
                <a class="nav-link" href="{{ url_for('statistics') }}">
                    <i class="fas fa-chart-bar me-1"></i>Statistics
                </a>
                <a class="nav-link" href="{{ url_for('users') }}">
                    <i class="fas fa-users me-1"></i>Users
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="hero-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                    <div class="hero-content">
                        <div class="hero-icon mb-4">
                            <i class="fas fa-broadcast-tower"></i>
                        </div>
                        <h1 class="hero-title mb-3">
                            Send Bulk SMS Messages
                            <span class="text-gradient">Instantly</span>
                        </h1>
                        <p class="hero-subtitle mb-4">
                            Reach up to 300 recipients with our powerful SMS broadcasting platform. 
                            Beautiful, fast, and reliable.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container main-content">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <!-- SMS Form Card -->
                <div class="glass-card main-form-card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-edit me-2"></i>
                            Compose Your Message
                        </h3>
                    </div>
                    <div class="card-body">
                        <form id="smsForm">
                            <!-- Message Input Section -->
                            <div class="form-group mb-4">
                                <label for="message" class="form-label">
                                    <i class="fas fa-comment-alt me-2"></i>
                                    Your Message
                                </label>
                                <textarea 
                                    id="message" 
                                    name="message" 
                                    class="form-control modern-textarea" 
                                    rows="4" 
                                    placeholder="Type your message here..."
                                    maxlength="1000"
                                    required
                                ></textarea>
                                <div class="message-info">
                                    <span id="charCount">0/1000 characters</span>
                                    <span id="smsCount">1 SMS</span>
                                </div>
                            </div>

                            <!-- Phone Numbers Input Section -->
                            <div class="form-group mb-4">
                                <label class="form-label">
                                    <i class="fas fa-phone me-2"></i>
                                    Recipients
                                </label>
                                
                                <!-- Input Method Tabs -->
                                <div class="input-tabs">
                                    <button type="button" class="tab-btn active" data-tab="manual">
                                        <i class="fas fa-keyboard me-2"></i>
                                        Manual Entry
                                    </button>
                                    <button type="button" class="tab-btn" data-tab="csv">
                                        <i class="fas fa-file-csv me-2"></i>
                                        CSV Upload
                                    </button>
                                </div>

                                <!-- Manual Entry Tab -->
                                <div class="tab-content active" id="manual-tab">
                                    <textarea 
                                        id="phoneNumbers" 
                                        name="phone_numbers" 
                                        class="form-control modern-textarea" 
                                        rows="3" 
                                        placeholder="Enter Ghana phone numbers (one per line or comma-separated)&#10;Example:&#10;+233530586643&#10;+233501141311"
                                    ></textarea>
                                    <div class="input-help">
                                        <i class="fas fa-info-circle me-1"></i>
                                        Enter Ghana phone numbers in format: +233XXXXXXXXX
                                    </div>
                                </div>

                                <!-- CSV Upload Tab -->
                                <div class="tab-content" id="csv-tab">
                                    <div class="file-upload-area" id="fileUploadArea">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <p>Drag & drop your CSV file here or click to browse</p>
                                        <input type="file" id="csvFile" accept=".csv" hidden>
                                        <button type="button" class="btn btn-outline-primary mt-2" onclick="document.getElementById('csvFile').click()">
                                            <i class="fas fa-folder-open me-2"></i>
                                            Choose File
                                        </button>
                                    </div>
                                    <div class="csv-preview" id="csvPreview"></div>
                                </div>
                            </div>

                            <!-- Send Button -->
                            <div class="text-center">
                                <button type="submit" class="btn btn-primary btn-send" id="sendBtn">
                                    <span class="btn-text">
                                        <i class="fas fa-paper-plane me-2"></i>
                                        Send SMS Messages
                                    </span>
                                    <div class="btn-spinner" style="display: none;">
                                        <div class="spinner-border spinner-border-sm me-2"></div>
                                        Sending...
                                    </div>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Progress Section -->
                <div class="glass-card progress-card" id="progressCard" style="display: none;">
                    <div class="card-header">
                        <h5 class="card-title">
                            <i class="fas fa-tasks me-2"></i>
                            Sending Progress
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="progress-bar-container">
                            <div class="progress modern-progress">
                                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                            </div>
                            <div class="progress-text" id="progressText">Preparing...</div>
                        </div>
                    </div>
                </div>

                <!-- Results Section -->
                <div class="glass-card results-card" id="resultsCard" style="display: none;">
                    <div class="card-header">
                        <h5 class="card-title">
                            <i class="fas fa-chart-pie me-2"></i>
                            Campaign Results
                        </h5>
                    </div>
                    <div class="card-body" id="resultsContent">
                        <!-- Results will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="successToast" class="toast align-items-center text-white bg-success border-0" role="alert">
            <div class="d-flex">
                <div class="toast-body">
                    <i class="fas fa-check-circle me-2"></i>
                    SMS campaign completed successfully!
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/modern.js') }}"></script>
    <script src="{{ url_for('static', filename='js/localStorage.js') }}"></script>
</body>
</html>